<%- include('includes/header') %>
    <section class="signup">
        <div class="container max-w-2xl mx-auto my-24 py-16">
            <div class="flex flex-col justify-center items-center border-solid border-slate-600 border-[1px] rounded-lg">
                <div class="font-bold text-4xl text-center my-3 py-8 text-purple-600"><h1>User Signup Form</h1></div>
                <% if (typeof message !== 'undefined' && message) { %>
                    <div class="text-red-500 font-bold text-lg"><%= message %></div>
                <% } %>
                <form action="signup" method="post" class="w-full px-2.5" id="signup-form" onsubmit="validateForm(event)">
                    <div class="my-1.5">
                        <label for="fname" class="font-bold text-lg px-2">First Name</label> <br>
                        <input type="text" name="fname" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="fname-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="lname" class="font-bold text-lg px-2">Last Name</label> <br>
                        <input type="text" name="lname" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="lname-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="username" class="font-bold text-lg px-2">User Name</label><br>
                        <input type="text" name="username" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="username-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="email" class="font-bold text-lg px-2">Email</label> <br>
                        <input type="email" name="email" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="email-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="gender" class="font-bold text-lg px-2">Gender</label> <br>
                        <select name="gender" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                            <option value="">--select your gender--</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                        <span class="error-msg text-red-500" id="gender-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="phone" class="font-bold text-lg px-2">Phone Number</label> <br>
                        <input type="tel" name="phone" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="phone-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="password" class="font-bold text-lg px-2">Password</label><br>
                        <input type="password" name="password" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="password-error"></span>
                    </div>
                    <div class="my-1.5">
                        <label for="cnfpwd" class="font-bold text-lg px-2">Confirm Password</label><br>
                        <input type="password" name="cnfpwd" class="w-full border-solid border-slate-600 border-[1px] rounded-lg outline-none px-2 py-2" required>
                        <span class="error-msg text-red-500" id="cnfpwd-error"></span>
                    </div>
                    <!-- <div class="g-recaptcha" data-sitekey="6LcmAO8pAAAAAA79Jz62Vw4ZnALZP-2XX3Z_xsKS"></div>
                    <span class="error-msg text-red-500" id="recaptcha-error"></span> -->
                    <div class="flex gap-2">
                        <button type="submit" class="bg-blue-600 px-6 py-2 rounded-lg m-4">Signup</button>
                        <p class=" py-2 mt-4">already registered<a href="#" class="text-blue-600 ml-1.5">login here</a></p>
                    </div>
                    
                </form>
            </div>
        </div>
    </section>
    <script>
        function validateForm(event) {
            event.preventDefault();

            // Clear previous error messages
            document.querySelectorAll('.error-msg').forEach(function(errorMsg) {
                errorMsg.textContent = '';
            });

            let isValid = true;

            // Validate first name and last name (no spaces allowed)
            const namePattern = /^\S+$/;
            const fname = document.querySelector('input[name="fname"]').value;
            if (!namePattern.test(fname)) {
                isValid = false;
                document.getElementById('fname-error').textContent = 'First Name must be one word with no spaces.';
            }
            const lname = document.querySelector('input[name="lname"]').value;
            if (!namePattern.test(lname)) {
                isValid = false;
                document.getElementById('lname-error').textContent = 'Last Name must be one word with no spaces.';
            }

            // Validate username
            const username = document.querySelector('input[name="username"]').value;
            const usernamePattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*]{7,}$/;
            if (!usernamePattern.test(username)) {
                isValid = false;
                document.getElementById('username-error').textContent = 'Username must be greater than 6 characters and contain letters, numbers, and symbols.';
            }

            // Validate password
            const password = document.querySelector('input[name="password"]').value;
            const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{7,}$/;
            if (!passwordPattern.test(password)) {
                isValid = false;
                document.getElementById('password-error').textContent = 'Password must be greater than 6 characters and contain letters, numbers, and symbols.';
            }

            // Validate passwords match
            const cnfpwd = document.querySelector('input[name="cnfpwd"]').value;
            if (password !== cnfpwd) {
                isValid = false;
                document.getElementById('cnfpwd-error').textContent = 'Passwords do not match.';
            }

            // Validate reCAPTCHA
            // var recaptchaResponse = grecaptcha.getResponse();
            // if (recaptchaResponse.length == 0) {
            //     isValid = false;
            //     document.getElementById('recaptcha-error').textContent = 'Please verify you are not a robot.';
            //     return;
            // }

            if (isValid) {
                document.getElementById("signup-form").submit();
            }
        }
    </script>
</body>
</html>